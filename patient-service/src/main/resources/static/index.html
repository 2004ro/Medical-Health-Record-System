<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MHRS | Medical Health Record System!</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <i class="fa-solid fa-heart-pulse"></i>
                <span>MedCare</span>
            </div>

            <nav class="nav-menu">
                <a href="#" class="nav-item active" onclick="showSection('dashboard')">
                    <i class="fa-solid fa-chart-pie"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item" onclick="showSection('patients')">
                    <i class="fa-solid fa-users"></i>
                    <span>Patients</span>
                </a>
                <a href="#" class="nav-item" onclick="showSection('appointments')">
                    <i class="fa-solid fa-calendar-check"></i>
                    <span>Appointments</span>
                </a>
                <a href="#" class="nav-item" onclick="showSection('settings')">
                    <i class="fa-solid fa-gear"></i>
                    <span>Settings</span>
                </a>
                <a href="#" class="nav-item" onclick="showSection('lab-results')">
                    <i class="fa-solid fa-flask"></i>
                    <span>Lab Results</span>
                </a>
                <a href="#" class="nav-item" onclick="showSection('revenue')">
                    <i class="fa-solid fa-file-invoice-dollar"></i>
                    <span>Revenue</span>
                </a>
            </nav>

            <div class="user-profile">
                <!-- Changed text color style inline for visibility if needed, but handled in CSS -->
                <div class="avatar">DA</div>
                <div class="user-info">
                    <h4 style="color: #1e293b;">Dr. Admin</h4>
                    <small style="color: #64748b;">Chief Physician</small>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header Removed as per request -->
            
            <!-- Section: Dashboard -->
            <section id="dashboard" class="content-section active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="icon-box blue"><i class="fa-solid fa-user-doctor"></i></div>
                        <div class="stat-info">
                            <h3>Total Patients</h3>
                            <p id="totalPatientsCount">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="icon-box green"><i class="fa-solid fa-calendar-day"></i></div>
                        <div class="stat-info">
                            <h3>Today's Visits</h3>
                            <p id="todayVisitsCount">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="icon-box orange"><i class="fa-solid fa-flask"></i></div>
                        <div class="stat-info">
                            <h3>Lab Results</h3>
                            <p id="labResultsCount">0 Pending</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="icon-box purple"><i class="fa-solid fa-hand-holding-dollar"></i></div>
                        <div class="stat-info">
                            <h3>Revenue</h3>
                            <p id="revenueAmount">$0</p>
                        </div>
                    </div>
                </div>

                <div class="recent-patients">
                    <div class="section-header">
                        <h2>Recent Patients</h2>
                        <a href="#" class="view-all" onclick="showSection('patients')">View All</a>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Patient ID</th>
                                    <th>Name</th>
                                    <th>Gender</th>
                                    <th>Contact</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="recentPatientsTableBody">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Section: Patients -->
            <section id="patients" class="content-section">
                <div class="section-header">
                    <h2>Patients</h2>
                    <button class="add-patient-btn" onclick="openModal()"><i class="fa-solid fa-plus"></i> Add
                        Patient</button>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Unique ID</th>
                                <th>Name</th>
                                <th>Age</th>
                                <th>Gender</th>
                                <th>Phone</th>
                                <th>Email</th>
                                <th>Blood Group</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="allPatientsTableBody">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section: Appointments -->
            <section id="appointments" class="content-section">
                <div class="section-header">
                    <h2>Appointments</h2>
                    <button class="add-patient-btn" onclick="openAppointmentModal()"><i class="fa-solid fa-plus"></i>
                        Book Appointment</button>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Patient Name</th>
                                <th>Doctor</th>
                                <th>Date/Time</th>
                                <th>Reason</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="appointmentsTableBody">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section: Settings -->
            <section id="settings" class="content-section">
                <div class="section-header">
                    <h2>Settings</h2>
                </div>
                <div class="settings-container">
                     <!-- Added Settings Fields -->
                    <div class="settings-card" style="background: white; padding: 2rem; border-radius: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.05);">
                        <h3 style="margin-bottom: 20px; color: var(--primary-dark);">Application Settings</h3>
                        <form onsubmit="event.preventDefault(); alert('Settings Saved!');">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label>Hospital Name</label>
                                    <input type="text" value="MedCare Hospital" >
                                </div>
                                <div class="form-group">
                                    <label>Admin Email</label>
                                    <input type="email" value="admin@medcare.com" >
                                </div>
                                <div class="form-group">
                                    <label>Enable Notifications</label>
                                    <select>
                                        <option value="true">Yes</option>
                                        <option value="false">No</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Theme</label>
                                    <select onchange="toggleTheme(this.value)">
                                        <option value="light">Light</option>
                                        <option value="dark">Dark</option>
                                    </select>
                                </div>
                                <div class="form-group full-width">
                                    <button class="btn-submit" style="width: 200px;">Save Changes</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </section>

            <!-- Section: Lab Results -->
            <section id="lab-results" class="content-section">
                <div class="section-header">
                    <h2>Lab Results</h2>
                    <button class="add-patient-btn" onclick="openLabModal()"><i class="fa-solid fa-plus"></i> Add
                        Result</button>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Patient Name</th>
                                <th>Test Name</th>
                                <th>Result</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="labResultsTableBody">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section: Revenue -->
            <section id="revenue" class="content-section">
                <div class="section-header">
                    <h2>Revenue & Billing</h2>
                    <button class="add-patient-btn" onclick="openBillModal()"><i class="fa-solid fa-plus"></i> Add
                        Bill</button>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Patient Name</th>
                                <th>Description</th>
                                <th>Amount</th>
                                <th>Status</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="revenueTableBody">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <!-- Add Appointment Modal -->
    <div class="modal" id="addAppointmentModal">
        <div class="modal-content" style="max-width: 500px">
            <div class="modal-header">
                <h2>Book Appointment</h2>
                <button class="close-btn" onclick="closeAppointmentModal()"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div class="modal-body">
                <form id="addAppointmentForm">
                    <div class="form-grid" style="grid-template-columns: 1fr;">
                        <div class="form-group">
                            <label>Patient ID (e.g. PAT-001)</label>
                            <!-- Search input for UI interaction -->
                            <input type="text" id="appPatientSearchInput" required
                                onchange="fetchPatientName()">
                            <!-- Actual ID sent to backend -->
                            <input type="hidden" name="patientId" id="appHiddenPatientId">
                        </div>
                        <div class="form-group">
                            <label>Patient Name</label>
                            <input type="text" name="patientName" id="appPatientName" readonly required
                                style="background: #f1f5f9;">
                        </div>
                        <div class="form-group">
                            <label>Doctor Name</label>
                            <select name="doctorName" required>
                                <option value="Dr. Smith (Cardiology)">Dr. Smith (Cardiology)</option>
                                <option value="Dr. Sarah (Neurology)">Dr. Sarah (Neurology)</option>
                                <option value="Dr. Mike (General)">Dr. Mike (General)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Date & Time</label>
                            <input type="datetime-local" name="appointmentTime" required>
                        </div>
                        <div class="form-group">
                            <label>Reason</label>
                            <input type="text" name="reason" required>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn-cancel" onclick="closeAppointmentModal()">Cancel</button>
                        <button type="submit" class="btn-submit">Book Now</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Patient Modal -->
    <div class="modal" id="addPatientModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Patient</h2>
                <button class="close-btn" onclick="closeModal()"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div class="modal-body">
                <form id="addPatientForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>First Name</label>
                            <input type="text" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label>Last Name</label>
                            <input type="text" name="lastName" required>
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label>Phone Number</label>
                            <input type="text" name="phoneNumber" pattern="\d{10}" title="10 digit number" required>
                        </div>
                        <div class="form-group">
                            <label>Date of Birth</label>
                            <input type="date" name="dateOfBirth" required>
                        </div>
                        <div class="form-group">
                            <label>Gender</label>
                            <select name="gender" required>
                                <option value="">Select</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Blood Group</label>
                            <select name="bloodGroup" required>
                                <option value="">Select</option>
                                <option value="A+">A+</option>
                                <option value="A-">A-</option>
                                <option value="B+">B+</option>
                                <option value="B-">B-</option>
                                <option value="O+">O+</option>
                                <option value="O-">O-</option>
                                <option value="AB+">AB+</option>
                                <option value="AB-">AB-</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Zip Code</label>
                            <input type="text" name="zipCode" required>
                        </div>
                        <div class="form-group full-width">
                            <label>Address</label>
                            <input type="text" name="address" required>
                        </div>
                        <div class="form-group">
                            <label>City</label>
                            <input type="text" name="city" required>
                        </div>
                        <div class="form-group">
                            <label>State</label>
                            <input type="text" name="state" required>
                        </div>
                        <div class="form-group full-width">
                            <label>Allergies</label>
                            <input type="text" name="allergies" placeholder="e.g. Peanuts, Penicillin">
                        </div>
                        <div class="form-group full-width">
                            <label>Medical History</label>
                            <textarea name="medicalHistory" rows="3" placeholder="Previous conditions..."></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn-cancel" onclick="closeModal()">Cancel</button>
                        <button type="submit" class="btn-submit">Save Patient</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Patient Modal -->
    <div class="modal" id="editPatientModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Patient</h2>
                <button class="close-btn" onclick="closeEditModal()"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div class="modal-body">
                <form id="editPatientForm">
                    <input type="hidden" name="patientId" id="editPatientId">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>First Name</label>
                            <input type="text" name="firstName" id="editFirstName" required>
                        </div>
                        <div class="form-group">
                            <label>Last Name</label>
                            <input type="text" name="lastName" id="editLastName" required>
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" name="email" id="editEmail" required>
                        </div>
                        <div class="form-group">
                            <label>Phone Number</label>
                            <input type="text" name="phoneNumber" id="editPhoneNumber" pattern="\d{10}"
                                title="10 digit number" required>
                        </div>
                        <div class="form-group">
                            <label>Date of Birth</label>
                            <input type="date" name="dateOfBirth" id="editDateOfBirth" required>
                        </div>
                        <div class="form-group">
                            <label>Gender</label>
                            <select name="gender" id="editGender" required>
                                <option value="">Select</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Blood Group</label>
                            <select name="bloodGroup" id="editBloodGroup" required>
                                <option value="">Select</option>
                                <option value="A+">A+</option>
                                <option value="A-">A-</option>
                                <option value="B+">B+</option>
                                <option value="B-">B-</option>
                                <option value="O+">O+</option>
                                <option value="O-">O-</option>
                                <option value="AB+">AB+</option>
                                <option value="AB-">AB-</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Zip Code</label>
                            <input type="text" name="zipCode" id="editZipCode" required>
                        </div>
                        <div class="form-group full-width">
                            <label>Address</label>
                            <input type="text" name="address" id="editAddress" required>
                        </div>
                        <div class="form-group">
                            <label>City</label>
                            <input type="text" name="city" id="editCity" required>
                        </div>
                        <div class="form-group">
                            <label>State</label>
                            <input type="text" name="state" id="editState" required>
                        </div>
                        <div class="form-group full-width">
                            <label>Allergies</label>
                            <input type="text" name="allergies" id="editAllergies"
                                placeholder="e.g. Peanuts, Penicillin">
                        </div>
                        <div class="form-group full-width">
                            <label>Medical History</label>
                            <textarea name="medicalHistory" id="editMedicalHistory" rows="3"
                                placeholder="Previous conditions..."></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn-cancel" onclick="closeEditModal()">Cancel</button>
                        <button type="submit" class="btn-submit">Update Patient</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Lab Modal -->
    <div class="modal" id="addLabModal">
        <div class="modal-content" style="max-width: 500px">
            <div class="modal-header">
                <h2>Add Lab Result</h2>
                <button class="close-btn" onclick="closeLabModal()"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div class="modal-body">
                <form id="addLabForm">
                    <div class="form-grid" style="grid-template-columns: 1fr;">
                        <div class="form-group">
                            <label>Patient Name</label>
                            <select name="patientId" id="labPatientSelect" required onchange="setPatientName('lab')">
                                <option value="">Select Patient</option>
                            </select>
                            <input type="hidden" name="patientName" id="labPatientNameHidden">
                        </div>
                        <div class="form-group">
                            <label>Test Name</label>
                            <input type="text" name="testName" required placeholder="e.g. Blood Test">
                        </div>
                        <div class="form-group">
                            <label>Result</label>
                            <input type="text" name="result" placeholder="e.g. Normal, 120mg/dL">
                        </div>
                        <div class="form-group">
                            <label>Status</label>
                            <select name="status">
                                <option value="PENDING">Pending</option>
                                <option value="COMPLETED">Completed</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Date</label>
                            <input type="date" name="testDate" required>
                        </div>
                        <div class="form-group">
                            <label>Notes</label>
                            <textarea name="notes"></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn-cancel" onclick="closeLabModal()">Cancel</button>
                        <button type="submit" class="btn-submit">Save Result</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Bill Modal -->
    <div class="modal" id="addBillModal">
        <div class="modal-content" style="max-width: 500px">
            <div class="modal-header">
                <h2>Add Transaction</h2>
                <button class="close-btn" onclick="closeBillModal()"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div class="modal-body">
                <form id="addBillForm">
                    <div class="form-grid" style="grid-template-columns: 1fr;">
                        <div class="form-group">
                            <label>Patient Name</label>
                            <select name="patientId" id="billPatientSelect" required onchange="setPatientName('bill')">
                                <option value="">Select Patient</option>
                            </select>
                            <input type="hidden" name="patientName" id="billPatientNameHidden">
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <input type="text" name="description" required placeholder="e.g. Consultation Fee">
                        </div>
                        <div class="form-group">
                            <label>Amount ($)</label>
                            <input type="number" name="amount" required>
                        </div>
                        <div class="form-group">
                            <label>Status</label>
                            <select name="status">
                                <option value="PENDING">Pending</option>
                                <option value="PAID">Paid</option>
                                <option value="UNPAID">Unpaid</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Date</label>
                            <input type="date" name="billDate" required>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn-cancel" onclick="closeBillModal()">Cancel</button>
                        <button type="submit" class="btn-submit">Save Transaction</button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <script src="app.js"></script>
</body>

</html>
